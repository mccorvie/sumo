### Match Recap - Day `r day`

```{r}
#| echo: false
#| 

match_sheet <- get_match_sheet( basho_id, day )

match_sheet <- match_sheet |> 
  mutate( 
    record_east = paste0( wins_east, "-", losses_east),
    record_west = paste0( wins_west, "-", losses_west),
    win = ifelse( eastShikona == winnerEn, "←","→"),
  ) 

post_sheet <- match_sheet |> 
  select( matchNo, eastShikona, record_east, pwin_east, elo_east,  win, elo_west, pwin_west, record_west, westShikona, surprisal)



gt( post_sheet) |>
  tab_options(table.width = pct(90)) |> 
  tab_options(table.font.size = "14px") |> 
  fmt_number(
    columns = c( `elo_west`, `elo_east` ),
    use_seps = F,
    decimals = 0  # sets the number of decimal places
  ) |> 
  fmt_number(
    columns =  c( surprisal, `pwin_east`, `pwin_west`),
    decimals = 2
  ) |> 
  cols_align(
    align = "center",
    columns = `win`   # replace with your column
  ) |> 
  tab_spanner(
    label = "East",
    columns = c( eastShikona, record_east,  pwin_east,elo_east )
  ) |>
  tab_spanner(
    label = "West",
    columns = c(  elo_west, pwin_west, record_west,westShikona)
    
  ) |>
  cols_label(
    matchNo = "Match",
    eastShikona = "Name",
    record_east = "Record",
    elo_east = "Elo", 
    pwin_east = "Win Prob", 
    win = "Win",    
    westShikona = "Name",
    pwin_west = "Win Prob", 
    elo_west = "Elo" ,
    record_west = "Record" ,  
    surprisal = "Surprisal"
  ) |> 
  tab_style(
    style = cell_borders(
      sides = "right",
      color = "black",
      weight = px(2)
    ),
    locations = cells_body(
      columns = c( `elo_east`, `win`, `westShikona` )
    ) 
  ) |> 
  tab_style(
    style = cell_text(weight = "bold"),
    locations = cells_body(
      columns = c(win)   # replace with your column name
    )
  )

```
